<div class="my-profile--banner flex flex--center violet" ng-show="vm.emailActivationPending">
  <span class="special">{{ 'my_profile_change_username_success' | translate}}</span>
  <span class="cross-container" ng-click="vm.emailActivationPending=false;"><span class="cross"></span></span>
</div>
<div class="my-profile--banner flex flex--center green" ng-show="vm.changePasswordSuccess">
  <span class="special">{{ 'my_profile_change_password_success' | translate}}</span>
</div>
<section class="my-profile--container">
  <div class="section--wrapper flex">
    <h2>
      {{ 'my_profile_title' | translate }}
    </h2>
  </div>
  <div class="section--wrapper">
    <div class="item flex user" ng-class="vm.showUserNameContainer ? 'expanded' : ''">
      <div class="flex one flex--vertically-start">
        <label class="special uppercase" for="name">{{'user_text' | translate}}</label>
      </div>
      <div class="flex three flex--wrap">      
        <form method="post" id="form_username" name="form_username" novalidate class="flex flex--wrap">
            <div class="input--wrapper">
              <input id="username" name="username" ng-model="vm.username" type="email" class="input input--large" ng-class="(vm.usernameSubmitted ||form_username.username.$dirty) && vm.existingEmail && !form_username.username.$error.required && !form_username.username.$error.email ? 'error': '' " maxlength="100" ng-maxlength="100"
                required email-format-validation validation-errors-fluid />
              <div>
                <span class="input--error" ng-show="(vm.usernameSubmitted ||form_username.username.$dirty) && vm.existingEmail && !form_username.username.$error.required && !form_username.username.$error.email">
                  <i class="arrow--up"></i>{{'validation_error_email_already_exist' | translate}}</span>
              </div>
            </div>
          <div class="confirm-icons--container flex">
            <div class="flex" ng-class="!vm.showUserNameContainer ? 'show' : ''">
              <svg class="icon edit-icon" ng-click="vm.showUserNameContainer=true;">
                  <use xlink:href="/images/sprite.svg#doppler-icon-edit-icon"></use>
              </svg>
            </div>
            <div class="flex"  ng-class="vm.showUserNameContainer ? 'show' : ''">
              <button class="tick-icon" debounced-ng-click="vm.changeUsername(form_username);">
                <div class="tick_stem"></div>
                <div class="tick_kick"></div>
              </button>
              <a class="cross" ng-click="vm.resetUsernameContainer()"></a>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="item flex password" ng-class="vm.showChangePassContainer ? 'expanded' : 'collapsed'">
      <div class="flex one flex--vertically-start">
        <label class="special uppercase" for="name">{{'password_simple_placeholder' | translate}}</label>
      </div>
      <div class="flex three flex--wrap">
        <span ng-show="!vm.showChangePassContainer">&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;</span>
        <svg class="icon edit-icon" ng-click="vm.showChangePassContainer=true;" ng-show="!vm.showChangePassContainer">
          <use xlink:href="/images/sprite.svg#doppler-icon-edit-icon"></use>
        </svg>
        <form method="post" id="form_pass" name="form_pass" novalidate class="flex flex--wrap">
          <div class="inputs--container" ng-show="vm.showChangePassContainer">
            <div class="input--wrapper">
              <input id="oldPass" name="oldPass" ng-model="vm.oldPass" ng-change="vm.wrongOldPassword = false;" ng-class="vm.wrongOldPassword ? 'error' : ''"
                type="password" placeholder="{{ 'my_profile_old_password' | translate }}" pass="vm.oldPass" maxlength="100"
                ng-maxlength="100" class="input input--large" required password-complex-validation validation-errors-fluid
              />
              <div>
                <span class="input--error" ng-show="(vm.passSubmitted ||form_pass.oldPass.$dirty) && vm.wrongOldPassword && !form_pass.oldPass.$error.strength && !form_pass.oldPass.$error.required">
                  <i class="arrow--up"></i>{{'my_profile_old_password_error' | translate}}</span>
              </div>
            </div>
            <div class="input--wrapper">
              <input id="pass" name="pass" ng-model="vm.pass" type="password" pass="vm.pass" placeholder="{{ 'my_profile_new_password' | translate }}"
                maxlength="100" ng-maxlength="100" class="input input--large" ng-change="vm.updateValidation(form_pass)" required password-complex-validation
                validation-errors-fluid />
            </div>
            <div class="input--wrapper">
              <input id="confPassword" name="confPass" ng-model="vm.confPass" pass="vm.confPass" placeholder="{{ 'my_profile_confirm_new_password' | translate }}"
                type="password" ng-change="vm.updateValidation(form_pass)" maxlength="100" ng-maxlength="100" class="input input--large"
                required validation-errors-fluid />
            </div>
          </div>
          <div class="confirm-icons--container flex" ng-show="vm.showChangePassContainer">
            <button class="tick-icon" ng-click="vm.changePassword(form_pass);">
              <div class="tick_stem"></div>
              <div class="tick_kick"></div>
            </button>
            <a class="cross" ng-click="vm.resetPasswordContainer()"></a>
          </div>
        </form>
      </div>
    </div>
    <div class="item flex language">
        <div class="flex one flex--vertically-start">
          <label class="special uppercase lang-text" for="name">{{'lang_text' | translate}}</label>
        </div>
        <div class="flex three flex--wrap">      
            <a class="en_flag flags" ng-click="changeLanguage('en')">
                <svg viewBox="0 0 18 18" style="background-color:#ffffff00" xmlns="http://www.w3.org/2000/svg" width="18" height="18"><g><path d="M3.345 2H14.66C13.114.75 11.143 0 9 0 6.857 0 4.89.75 3.345 2zM.51 6h16.98c-.252-.712-.592-1.383-1.005-2H1.515C1.102 4.617.762 5.288.51 6zm-.455 4h17.89c.036-.328.055-.662.055-1 0-.338-.02-.672-.055-1H.055C.02 8.328 0 8.662 0 9c0 .338.02.672.055 1zm1.46 4h14.97c.413-.617.753-1.288 1.005-2H.51c.252.712.592 1.383 1.005 2zm13.14 2H3.345C4.89 17.25 6.857 18 9 18c2.143 0 4.11-.75 5.655-2z" fill="#df3434"></path><path d="M1.515 4h14.97c-.506-.755-1.12-1.43-1.825-2H3.345c-.705.57-1.324 1.245-1.83 2zM.055 8h17.89c-.077-.694-.23-1.363-.455-2H.51C.285 6.637.132 7.306.055 8zm.455 4h16.98c.225-.637.38-1.306.455-2H.055c.076.694.23 1.363.455 2zm2.835 4h11.31c.705-.57 1.324-1.245 1.83-2H1.515c.506.755 1.125 1.43 1.83 2z" fill="#fff"></path><path d="M9 10V0C4.03 0 0 4.03 0 9c0 .338.018.672.055 1H9z" fill="#4376a7"></path><path fill="#fff" d="M7 2h1v1H7zM5 3h1v1H5zM7 4h1v1H7zM5 5h1v1H5zM7 6h1v1H7zM5 7h1v1H5zM7 8h1v1H7zM3 2h1v1H3zM3 4h1v1H3zM3 6h1v1H3zM3 8h1v1H3z"></path><g fill="#fff"><path d="M1 5h1v1H1zM1 7h1v1H1z"></path></g></g></svg>
              </a>
              <a class="es_flag flags" ng-click="changeLanguage('es')">
                <svg viewBox="0 0 20 20" style="background-color:#ffffff00" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><g><path d="M18.317 15.556H1.683C3.477 18.236 6.533 20 10 20c3.467 0 6.523-1.765 8.317-4.444zM.567 6.666h18.866C18.06 2.784 14.353 0 10 0 5.646 0 1.94 2.783.567 6.667z" fill="#df3434"></path><path d="M1.683 15.556h16.634C19.38 13.966 20 12.056 20 10c0-1.17-.198-2.29-.567-3.333H.567C.197 7.71 0 8.83 0 10c0 2.056.62 3.967 1.683 5.556z" fill="#ffc20e"></path><path d="M2.222 11.11c0-1.84 1.493-3.332 3.334-3.332 1.84 0 3.333 1.492 3.333 3.333 0 1.842-1.494 3.334-3.335 3.334-1.84 0-3.333-1.492-3.333-3.333z" fill="#643c31"></path><path d="M4.89 10.444c0-.736.596-1.333 1.332-1.333.736 0 1.334.598 1.334 1.334 0 .737-.598 1.334-1.334 1.334-.736 0-1.333-.597-1.333-1.334z" fill="#c6ab61"></path></g></svg>
              </a>
        </div>
      </div>
  </div>
</section>